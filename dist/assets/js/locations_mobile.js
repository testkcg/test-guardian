function setStateNames(stateDefiner) {
  switch(stateDefiner) {
    case "AL":
        fullStateName = "Alabama",
        stateJobLinkNumber = "5540483027",
        factSheetReference = "StateFactSheets_AL.pdf";
        break;

    case "AK":
        fullStateName = "Alaska",
        stateJobLinkNumber = "522740082077",
        factSheetReference = "";
        break;

    case "AZ":
        fullStateName = "Arizona",
        stateJobLinkNumber = "521240082077",
        factSheetReference = "StateFactSheets_AZ.pdf";
        break;

    case "AR":
        fullStateName = "Arkansas",
        stateJobLinkNumber = "520840082077",
        factSheetReference = "StateFactSheets_AL.pdf";
        break;

    case "CA":
        fullStateName = "California",
        stateJobLinkNumber = "521540082077",
        factSheetReference = "StateFactSheets_CA.pdf";
        break;

    case "CO":
        fullStateName = "Colorado",
        stateJobLinkNumber = "524740082077",
        factSheetReference = "";
        break;

    case "CT":
        fullStateName = "Connecticut",
        stateJobLinkNumber = "523340082077",
        factSheetReference = "";
        break;

    case "DE":
        fullStateName = "Delaware",
        stateJobLinkNumber = "524240082077",
        factSheetReference = "StateFactSheets_DE.pdf";
        break;

    case "DC":
        fullStateName = "District of Columbia",
        stateJobLinkNumber = "560740082077",
        factSheetReference = "";
        break;

    case "FL":
        fullStateName = "Florida",
        stateJobLinkNumber = "522440082077",
        factSheetReference = "StateFactSheets_FL.pdf";
        break;

    case "GA":
        fullStateName = "Georgia",
        stateJobLinkNumber = "524440082077",
        factSheetReference = "StateFactSheets_GA.pdf";
        break;

    case "HI":
        fullStateName = "Hawaii",
        stateJobLinkNumber = "",
        factSheetReference = "";
        break;

    case "ID":
        fullStateName = "Idaho",
        stateJobLinkNumber = "524540082077",
        factSheetReference = "";
        break;

    case "IL":
        fullStateName = "Illinois",
        stateJobLinkNumber = "525140082077",
        factSheetReference = "StateFactSheets_IL.pdf";
        break;

    case "IN":
        fullStateName = "Indiana",
        stateJobLinkNumber = "521340082077",
        factSheetReference = "StateFactSheets_IN.pdf";
        break;

    case "IA":
        fullStateName = "Iowa",
        stateJobLinkNumber = "523840082077",
        factSheetReference = "StateFactSheets_IO.pdf";
        break;

    case "KS":
        fullStateName = "Kansas",
        stateJobLinkNumber = "5340483027",
        factSheetReference = "StateFactSheets_KS.pdf";
        break;

    case "KY":
        fullStateName = "Kentucky",
        stateJobLinkNumber = "523440082077",
        factSheetReference = "StateFactSheets_KY.pdf";
        break;

    case "LA":
        fullStateName = "Louisiana",
        stateJobLinkNumber = "521640082077",
        factSheetReference = "StateFactSheets_LA.pdf";
        break;

    case "ME":
        fullStateName = "Maine",
        stateJobLinkNumber = "525240082077",
        factSheetReference = "";
        break;

    case "MD":
        fullStateName = "Maryland",
        stateJobLinkNumber = "520640082077",
        factSheetReference = "";
        break;

    case "MA":
        fullStateName = "Massachusetts",
        stateJobLinkNumber = "523140082077",
        factSheetReference = "StateFactSheets_MA.pdf";
        break;

    case "MI":
        fullStateName = "Michigan",
        stateJobLinkNumber = "523240082077",
        factSheetReference = "StateFactSheets_MI.pdf";
        break;

    case "MN":
        fullStateName = "Minnesota",
        stateJobLinkNumber = "524940082077",
        factSheetReference = "StateFactSheets_MN.pdf";
        break;

    case "MS":
        fullStateName = "Mississippi",
        stateJobLinkNumber = "521940082077",
        factSheetReference = "StateFactSheets_MS.pdf";
        break;

    case "MO":
        fullStateName = "Missouri",
        stateJobLinkNumber = "524340082077",
        factSheetReference = "StateFactSheets_MO.pdf";
        break;

    case "MT":
        fullStateName = "Montana",
        stateJobLinkNumber = "520940082077",
        factSheetReference = "";
        break;

    case "NE":
        fullStateName = "Nebraska",
        stateJobLinkNumber = "521140082077",
        factSheetReference = "StateFactSheets_NE.pdf";
        break;

    case "NV":
        fullStateName = "Nevada",
        stateJobLinkNumber = "524140082077",
        factSheetReference = "StateFactSheets_NV.pdf";
        break;

    case "NH":
        fullStateName = "New Hampshire",
        stateJobLinkNumber = "524640082077",
        factSheetReference = "StateFactSheets_NH.pdf";
        break;

    case "NJ":
        fullStateName = "New Jersey",
        stateJobLinkNumber = "523640082077",
        factSheetReference = "StateFactSheets_NJ.pdf";
        break;

    case "NM":
        fullStateName = "New Mexico",
        stateJobLinkNumber = "521040082077",
        factSheetReference = "";
        break;

    case "NY":
        fullStateName = "New York",
        stateJobLinkNumber = "520540082077",
        factSheetReference = "StateFactSheets_NY.pdf";
        break;

    case "NC":
        fullStateName = "North Carolina",
        stateJobLinkNumber = "522840082077",
        factSheetReference = "StateFactSheets_NC.pdf";
        break;

    case "ND":
        fullStateName = "North Dakota",
        stateJobLinkNumber = "590840082077",
        factSheetReference = "";
        break;

    case "OH": 
        fullStateName = "Ohio",
        stateJobLinkNumber = "524040082077",
        factSheetReference = " StateFactSheets_OH.pdf";
        break;

    case "OK":
        fullStateName = "Oklahoma",
        stateJobLinkNumber = "520340082077",
        factSheetReference = "StateFactSheets_OK.pdf";
        break;

    case "OR":
        fullStateName = "Oregon",
        stateJobLinkNumber = "521840082077",
        factSheetReference = "StateFactSheets_OR.pdf";
        break;

    case "PA":
        fullStateName = "Pennsylvania",
        stateJobLinkNumber = "523540082077",
        factSheetReference = "StateFactSheets_PA.pdf";
        break;

    case "PR":
        fullStateName = "Puerto Rico",
        stateJobLinkNumber = "521240082077",
        factSheetReference = "";
        break;

    case "RI":
        fullStateName = "Rhode Island",
        stateJobLinkNumber = "523740082077",
        factSheetReference = "";
        break;

    case "SC":
        fullStateName = "South Carolina",
        stateJobLinkNumber = "522940082077",
        factSheetReference = "StateFactSheets_SC.pdf";
        break;

    case "SD":
        fullStateName = "South Dakota",
        stateJobLinkNumber = "522040082077",
        factSheetReference = "";
        break;

    case "TN":
        fullStateName = "Tennessee",
        stateJobLinkNumber = "522340082077",
        factSheetReference = "StateFactSheets_TN.pdf";
        break;

    case "TX":
        fullStateName = "Texas",
        stateJobLinkNumber = "520740082077",
        factSheetReference = "StateFactSheets_TX.pdf";
        break;

    case "UT":
        fullStateName = "Utah",
        stateJobLinkNumber = "522540082077",
        factSheetReference = "";
        break;

    case "VT":
        fullStateName = "Vermont",
        stateJobLinkNumber = "524840082077",
        factSheetReference = "";
        break;

    case "VA":
        fullStateName = "Virginia",
        stateJobLinkNumber = "523940082077",
        factSheetReference = "StateFactSheets_VA.pdf";
        break;

    case "WA":
        fullStateName = "Washington",
        stateJobLinkNumber = "520240082077",
        factSheetReference = "StateFactSheets_WA.pdf";
        break;

    case "WV":
        fullStateName = "West Virginia",
        stateJobLinkNumber = "521740082077",
        factSheetReference = "";
        break;

    case "WI":
        fullStateName = "Wisconsin",
        stateJobLinkNumber = "6740483027",
        factSheetReference = "StateFactSheets_WI.pdf";
        break;

    case "WY":
        fullStateName = "Wyoming",
        stateJobLinkNumber = "521440082077",
        factSheetReference = "StateFactSheets_WY.pdf";
        break;

    default:
      fullStateName = '',
      stateJobLinkNumber = '',
      factSheetReference = '';
  }
}





//Get the JSON
  function getData() {
    $.ajax({
        url : '/assets/js/location_data.json',
        type: 'GET',
        success : parseJSON
    });
  }
  getData();

// Function to remove loading gif
  function removeLoadingGif() {
    $('#load').remove();
  }
// END Function to remove loading gif

// Function to insert commas into large numbers
  function commaSeparateNumber(val) {
    if(val !== null) {
      while ( /(\d+)(\d{3})/.test(val.toString()) ) { 
          val = val.toString().replace(/(\d+)(\d{3})/, '$1'+','+'$2');
      }
      return val;   
    }
  }
// END Function to insert commas into large numbers





function parseJSON(data) {
  
  // Categorized Arrays for each location level (THESE ARE NOT USED)
    var cityInfoArray = new Array(),
        companyInfoArray = new Array();

  // Arrays for specific information heirarchy based on slide out menu
    var countryLevelInfoArray = new Array(),
        stateLevelInfoArray = new Array();

    var countries = data.Countries;

  //ITERATE COUNTRIES
    for( var C = 0; C < countries.length; C++ ) {

      stateAbbArray = new Array();

      // Create country variables from JSON
        var countryName = countries[C].Name,
            countryHeadCount = commaSeparateNumber( countries[C].HeadCount ),
            countryStates = data.Countries[C].States;

      // Collect all country related Information
        var miniCountryLevelInfoArray = new Array();
            miniCountryLevelInfoArray[C]=[{'countryName':countryName,'countryHeadCount':countryHeadCount, 'stateAbb':stateAbbArray }];
            countryLevelInfoArray.sort().push(miniCountryLevelInfoArray[C]);

      //iterate states;
        var states = data.Countries[C].States;

    //ITERATE STATES
      for (var S = 0; S < states.length; S++) {

        cityNameArray = new Array();

        // state variables from JSON information
          var stateAbb = states[S].Name,
              stateHeadCount = commaSeparateNumber( states[S].HeadCount ),
              stateCompensation = '$'+commaSeparateNumber( states[S].Compensation );

          // Set state title based on state abbreviation
            setStateNames(stateAbb);
          // END Set state title based on state abbreviation

        // Create array of just state abbreivations for countryInfoLevelArray
          var miniStateAbbArray = new Array();
              miniStateAbbArray[S] = [{'stateAbb': stateAbb}];
              stateAbbArray.sort().push(miniStateAbbArray[S]);
        // END Create array of just state abbreivations for countryInfoLevelArray

        // Create an array of State information
          var miniStateLevelInfoArray = new Array();
              miniStateLevelInfoArray[S]=[{'stateAbb':stateAbb, 'fullStateName':fullStateName, 'cityNames': cityNameArray,'stateHeadCount':stateHeadCount,'stateCompensation':stateCompensation, 'stateFactSheetReference': factSheetReference, 'stateJobLinkNumber': stateJobLinkNumber}];
              stateLevelInfoArray.sort().push(miniStateLevelInfoArray[S]);
        // END Create an array of State information

        //iterate cities;
          var cities = data.Countries[C].States[S].Cities;

        //ITERATE CITIES
          for (var SS = 0; SS < cities.length; SS++) {

            companyNameArray = new Array();

            var cityName = cities[SS].Name,
                companyName = cities[SS].companies,
                companies = data.Countries[C].States[S].Cities[SS].Companies;

            // Create array of city names to inject in stateLevelInfoArray
              var miniCityNameArray = new Array();
                  miniCityNameArray[S] = [{'countryName':countryName, 'cityName':cityName, 'companyNames':companyNameArray}];
                  cityNameArray.sort().push(miniCityNameArray[S]);

            //Create an array of City information
              var miniCityInfoArray = new Array();
                  miniCityInfoArray[SS]=[cityName, companyName];
                  cityInfoArray.sort().push(miniCityInfoArray[SS]);
            //END Create an array of City information

            //ITERATE COMPANIES
              for (var CO = 0; CO < companies.length; CO++) {

                // Set company variables based on JSON
                  var companyID = companies[CO].Name.toLowerCase().replace(/[^A-Z0-9]/ig, ""), //turns all company ID's to lowercase and removes spaces
                      companyLng = companies[CO].Longitude,
                      companyLat = companies[CO].Latitude;

                // Set company title based on company ID
                  switch(companyID) {
                    case "flinthillsresources":
                      companyName = 'Flint Hills Resources',
                      companyColor = '#0d4d6e';
                      break;
                    case "georgiapacific":
                      companyName = 'Georgia-Pacific',
                      companyColor = '#ED804F';
                      break;
                    case "invista":
                      companyName = 'INVISTA',
                      companyColor = '#EB4350';
                      break;
                    case "kochagenergysolutions":
                      companyName = 'Koch Ag & Energy Solutions',
                      companyColor = '#7EC274';
                      break;
                    case "kbs":
                      companyName = 'Koch Business Solutions',
                      companyColor = '#00e4ff';
                      break;
                    case "kochchemicaltechnologygroup":
                      companyName = 'Koch Chemical Technology Group',
                      companyColor = '#8A8EC2';
                      break;
                    case "kochindustriesincandother":
                      companyName = 'Koch Industries',
                      companyColor = '#00a8e1';
                      break;
                    case "kochminerals":
                      companyName = 'Koch Minerals',
                      companyColor = '#FEE56C';
                      break;
                    case "kochpipelinecompany":
                      companyName = 'Koch Pipeline Company',
                      companyColor = '#2394A3';
                      break;
                    case "kochsupplytrading":
                      companyName = 'Koch Supply & Trading',
                      companyColor = '#9B9B9B';
                      break;
                    case "matadorcattlecompany":
                      companyName = 'Matador Cattle Company',
                      companyColor = '#783342';
                      break;
                    case "molex":
                      companyName = 'Molex',
                      companyColor = '#945EA6';
                      break;
                    default:
                    companyName = '';
                  }

                // Create array of company names to inject in citiesArray
                  var miniCompanyInfoArray = new Array();
                      miniCompanyInfoArray[CO] = [{'companyName': companyName, 'companyID':companyID, 'countryName':countryName, 'countryHeadCount':countryHeadCount, 'fullStateName':fullStateName, 'cityName':cityName}];
                      companyInfoArray.sort().push(miniCompanyInfoArray[CO]);

                  var miniCompanyNameArray = new Array();
                      miniCompanyNameArray[CO] = [{'companyName': companyName}];
                      companyNameArray.sort().push(miniCompanyNameArray[CO]);
              } //iterate companies
          } // iterate cities

      } //iterate states

  } //iterate countries





// DOM variables
  var DOMmobileLocationsInfo = $('.mobile_locations_info'),
      DOMlevel1locationInfo = $('.level_1_location_info'),
      DOMcompanyDropdownContainer = $('.company_dropdown_container'),
      DOMcompanyDropdown = $('.company_dropdown'),
      DOMcompaniesListOption = $('.companies_list_option span'),
      DOMlevel2locationInfo = $('.level_2_location_info'),
      DOMcountriesList = $('.countries_list'),
      DOMcountriesListOption = $('.countries_list_option span'),
      DOMselectedCompanyLogo = $('.selected_company_logo'),
      DOMlogoUnderlay = $('.logo_underlay'),
      DOMbackButton = $('.back_button')

      DOMlevel3locationInfoUSlocation = $('.level_3_location_info_us_location'),
      DOMlevel3locationInfoNonUSlocation = $('.level_3_location_info_non_us_location'),
      DOMstatesList = $('.states_list'),
      DOMstatesListOption = $('.states_list_option span'),
      DOMcountryTitle = $('.country_title span'),
      DOMcountryJobsContainer = $('.country_jobs_container'),
      DOMcountryJobs = $('.country_jobs_container span'),
      DOMcountryCompaniesContainer = $('.country_companies_container'),
      DOMcountryCompaniesListContainer = $('.country_companies_list_container'),

      DOMlevel4locationInfo = $('.level_4_location_info'),
      DOMstateWagesContainer = $('.state_wages'),
      DOMstateTitle = $('.state_title span'),
      DOMstateJobsContainer = $('.state_jobs_container'),
      DOMstateJobs = $('.state_jobs_container span'),
      DOMstateWages = $('.state_wages span'),

      DOMjobsLinksContainer = $('.state_jobs_link_container a'),
      DOMcitiesInfoContainer = $('.cities_info_container'),
      DOMstateCityDropdownContainer = $('.state_city_dropdown_container'),
      DOMstateCityDropdown = $('.state_city_dropdown'),
      DOMcityCompanyContainer = $('.state_city_company_container');
// END DOM variables  


// Variables from the JSON data
  var selectedCompany,
      selectedCompanyClass,
      selectedCountry,
      selectedCompany;

  var activeViewHeight;

  var currentLoopingCountry,
      currentLoopingCompany,
      currentLoopingState;

  var activeCompany,
      activeCity;

  var currentLoopingState,
      currentLoopingStateHeadCount,
      currentLoopingStateCompensation,
      currentLoopingStateJobLinkNumber,
      currentLoopingCities;

  var associatedCountryArray = [],
      uniqueAssociatedCountryArray =[];

  var associatedStateArray = [],
      uniqueAssociatedStateArray = [];

  var associateCompaniesArray = [],
      uniqueAssociatedCompaniesArray = [];





  // Reusable selected company looping function
    function onCompanySelectionFn(selectedCompanyParam) {

      // Clear the associated country before looping to prevent array from being aggregated with multiple clicks
        associatedCountryArray.length = 0;

      // Loop through companies and find match
        for( var a=0; a<companyInfoArray.length; a++ ) {

          currentLoopingCompany = companyInfoArray[a][0].companyName,
          currentLoopingCountry = companyInfoArray[a][0].countryName;

          // if company matches clicked company.sort() push associated countries to array
            if ( selectedCompanyParam === currentLoopingCompany ) {
              associatedCountryArray.sort().push(currentLoopingCountry);

              activeCompany = currentLoopingCompany;
            }
        }
      // END Loop through companies and find match

      // Remove duplicate location values and create arrays to append to DOM
        uniqueAssociatedCountryArray = unique(associatedCountryArray);

      // Empty list first and then Loop through countries and append them to DOM
        DOMcountriesList.empty();

        for( var b=0; b<uniqueAssociatedCountryArray.length; b++ ) {
          DOMcountriesList.append("<li class='countries_list_option'><span>"+uniqueAssociatedCountryArray[b]+"</span></li>");
        }
      // END Empty list first and then Loop through countries and append them to DOM

      // Set value of company dropdown container
        DOMcompanyDropdown.val(selectedCompany);
    }
  // END Reusable selected company looping function

  // Reusable selected country looping function
    function onUSAcountrySelectionFn(selectedCountryParam) {

      // Clear the associated states before looping to prevent array from being aggregated with multiple clicks
        associatedStateArray.length = 0;

      // Loop through companies and find match
        for( var c=0; c<companyInfoArray.length; c++ ) {

          currentLoopingCompany = companyInfoArray[c][0].companyName,
          currentLoopingCountry = companyInfoArray[c][0].countryName,
          currentLoopingState = companyInfoArray[c][0].fullStateName;

          // if country matches clicked country.sort() push associated states to array
            if ( selectedCountryParam === currentLoopingCountry && currentLoopingCompany === activeCompany ) {
              associatedStateArray.sort().push(currentLoopingState);
            }
        }
      // END Loop through companies and find match

      // Remove duplicate location values and create arrays to append to DOM
        uniqueAssociatedStateArray = unique(associatedStateArray);

      // Empty list first and then Loop through states and append them to DOM
        DOMstatesList.empty();

        for ( var d=0; d<uniqueAssociatedStateArray.length; d++ ) {
          DOMstatesList.append("<li class='states_list_option'><span>"+uniqueAssociatedStateArray[d]+"</span></li>");
        }
      // END Loop through states and append them to DOM
    }
  // END Reusbale selected country looping function

  // Reusable selected country looping function
    function onOthercountrySelectionFn(selectedCountryParam) {

      associateCompaniesArray.length = 0;

      // Loop through companies and find match
        for( var c=0; c<companyInfoArray.length; c++ ) {

          currentLoopingCompany = companyInfoArray[c][0].companyName,
          currentLoopingCountry = companyInfoArray[c][0].countryName,
          currentLoopingCountryHeadCount = companyInfoArray[c][0].countryHeadCount,
          currentLoopingState = companyInfoArray[c][0].fullStateName;

          // if country matches clicked country.sort() push associated states to array
            if ( selectedCountryParam === currentLoopingCountry && currentLoopingCompany === activeCompany ) {
              DOMcountryTitle.empty().append(currentLoopingCountry);
              DOMcountryJobs.empty().append(currentLoopingCountryHeadCount);

              associateCompaniesArray.sort().push(currentLoopingCompany);
            }
        }
      // END Loop through companies and find match
      
      // Remove duplicate companies and create array to append to DOM
        uniqueAssociatedCompaniesArray = unique(associateCompaniesArray);

      // Empty list first before adding new companeis
        DOMcountryCompaniesListContainer.empty();

        for( var d=0; d<uniqueAssociatedCompaniesArray.length; d++) {
          DOMcountryCompaniesListContainer.append('<p>'+uniqueAssociatedCompaniesArray[d]+',</p>');
        }

      // Remove duplicate location values and create arrays to append to DOM
        uniqueAssociatedStateArray = unique(associatedStateArray);
    }
  // END Reusbale selected country looping function

  // Reusable selected state looping function
    function onStateSelectionFn(selectedStateParam) {

      // Clear the associated companies before looping to prevent array from being aggregated with multiple clicks
        associateCompaniesArray.length = 0;

      // Loop through companies and find match
        for( var e=0; e<stateLevelInfoArray.length; e++ ) {

          currentLoopingState = stateLevelInfoArray[e][0].fullStateName,
          currentLoopingStateHeadCount = stateLevelInfoArray[e][0].stateHeadCount,
          currentLoopingStateCompensation = stateLevelInfoArray[e][0].stateCompensation,
          currentLoopingStateJobLinkNumber = stateLevelInfoArray[e][0].stateJobLinkNumber,
          currentLoopingCities = stateLevelInfoArray[e][0].cityNames;

          // if company matches clicked company.sort() push associated countries to array
            if ( selectedStateParam === currentLoopingState ) {
              DOMstateTitle.empty().append(currentLoopingState);
              DOMjobsLinksContainer.empty().append('View Jobs in '+currentLoopingState);
              DOMjobsLinksContainer.attr('href', 'https://kochcareers.taleo.net/careersection/2/moresearch.ftl?lang=en&location='+currentLoopingStateJobLinkNumber);

              // If state wages does not equal 0
                if (currentLoopingStateCompensation !== '$0') {
                  DOMstateWagesContainer.css('display', 'block');
                  DOMstateWages.empty().append(currentLoopingStateCompensation);
                }
                else {
                  DOMstateWagesContainer.css('display', 'none');
                }

              // If state head count does not equal 0
                if (currentLoopingStateHeadCount !== 0) {
                  DOMstateJobsContainer.css('display', 'block');
                  DOMstateJobs.empty().append(currentLoopingStateHeadCount);
                }
                else {
                  DOMstateJobsContainer.css('display', 'none');
                }

              DOMstateCityDropdown.empty().append("<option value='Select a City'>Select a City</option>");
              DOMcityCompanyContainer.empty();

              // loop current cities and append them to dropdown
              for( var f=0; f<currentLoopingCities.length; f++) {

                //removed spaces and special characters from city names to use them as CSS classes
                var cityClassNameValue = currentLoopingCities[f][0].cityName.replace(/\s+/g, '-').toLowerCase();
                
                DOMstateCityDropdown.append('<option value='+cityClassNameValue+'>'+currentLoopingCities[f][0].cityName+'</option>');
                DOMcityCompanyContainer.append("<div class='companies_option "+cityClassNameValue+"'></div>");

                for ( var g=0; g<currentLoopingCities[f][0].companyNames.length; g++) {
                  associateCompaniesArray.sort().push(currentLoopingCities[f][0].companyNames[g][0].companyName);
                }

                //Create an array of unique names for associated Companies
                  uniqueAssociatedCompaniesArray = unique(associateCompaniesArray);

                  for( var h=0; h<uniqueAssociatedCompaniesArray.length; h++) {
                    $('.'+cityClassNameValue).append('<p>'+uniqueAssociatedCompaniesArray[h]+'</p>');
                  }
              }
            }
          // END if company matches clicked company.sort() push associated countries to array
        }
      // END Loop through companies and find match
    }
  // END Reusbale selected state looping function



  // Function to remove duplicate values from array
    function unique(list) {
      var result = [];
      $.each(list, function(i, e) {
          if ($.inArray(e, result) == -1) result.sort().push(e);
      });
      return result;
    }
  // END Function to remove duplicate values from array



  // Companies option click
    DOMcompaniesListOption.click(function(event){

      selectedCompany = $(this).text();
      selectedStateClass = $(this).attr('data-company-id');

      //Set window hash
        window.location.hash='countries';

      // Call Company selection function
        onCompanySelectionFn(selectedCompany);

      // Set selected company Logo
        DOMselectedCompanyLogo.removeClass().addClass('selected_company_logo').addClass(selectedStateClass);
        
      // add and remove active class for views
        DOMlevel1locationInfo.removeClass('active');
        DOMlevel2locationInfo.addClass('active');
        DOMlogoUnderlay.addClass('active');
        DOMselectedCompanyLogo.addClass('active');
        DOMbackButton.addClass('active');

      event.stopPropagation();
    });
  // END Companies option click



  // On click of country option
    $(document).on('click', '.countries_list_option span', function(event) {

      var selectedCountry = $(this).text(), 
          USAlocationDefiner;

      // If country in USA
        if (selectedCountry === 'United States') {
          USAlocationDefiner = true;

          //Set window hash
            window.location.hash='states';

          // Call Country selection function
            onUSAcountrySelectionFn(selectedCountry);

          // add and remove active class for views
            DOMlevel2locationInfo.removeClass('active');
            DOMlevel3locationInfoUSlocation.addClass('active');
        }
        else {
          USAlocationDefiner = false;

          //Set window hash
            window.location.hash='country_info';

          // Call Country selection function
            onOthercountrySelectionFn(selectedCountry);

          // add and remove active class for views
            DOMlevel2locationInfo.removeClass('active');
            DOMlevel3locationInfoNonUSlocation.addClass('active');
            DOMselectedCompanyLogo.removeClass('active');
        }
      event.stopPropagation();
    });
  // END On click of country option



  // On click of state option
    $(document).on('click', '.states_list_option span', function(event) {
      
      var selectedState = $(this).text();

      //Set window hash
        window.location.hash='state_facts';

      // Call State selection function
        onStateSelectionFn(selectedState);

      // add and remove active class for views
        DOMselectedCompanyLogo.removeClass('active');
        DOMlevel3locationInfoUSlocation.removeClass('active');
        DOMlevel4locationInfo.addClass('active');

      event.stopPropagation();
    });
  // END On click of state option



  // On City option change
    DOMstateCityDropdown.change(function() {
      selectedCity = this.value;

      $('.'+selectedCity).siblings().fadeOut(300);       
      $('.'+selectedCity).delay(300).fadeIn(); 

      if (selectedCity === 'Select a City') {
        $('.companies_option').fadeOut();
      }
    });
  // END On city option change



  // On companies option change
    DOMcompanyDropdownContainer.change(function() {

      DOMselectedCompanyLogo.removeClass(selectedCompanyClass);

      selectedCompany = $('option:selected', this).text();
      selectedCompanyClass = $('option:selected', this).attr('data-company-id');

      // Set selected company Logo
        DOMselectedCompanyLogo.addClass(selectedCompanyClass);
      
      // Call Company selection function
        onCompanySelectionFn(selectedCompany);
    });
  // END On companies option change



  // Back button functionality  
    DOMbackButton.click(function(event) {
      
      if ( window.location.hash === '#countries' ) {
        window.location.hash='';

        // add and remove active class for views
          DOMlevel1locationInfo.addClass('active');
          DOMlevel2locationInfo.removeClass('active');
          DOMlogoUnderlay.removeClass('active');
          DOMselectedCompanyLogo.removeClass('active');
          DOMbackButton.removeClass('active');
      }
      else if ( window.location.hash === '#states' ) {
        window.location.hash='countries';

        // add and remove active class for views
          DOMlevel2locationInfo.addClass('active');
          DOMlevel3locationInfoUSlocation.removeClass('active');
      }
      else if ( window.location.hash === '#country_info' ) {
        window.location.hash='countries';

        // add and remove active class for views
          DOMlevel2locationInfo.addClass('active');
          DOMlevel3locationInfoNonUSlocation.removeClass('active');
          DOMselectedCompanyLogo.addClass('active');
          DOMlogoUnderlay.addClass('active');
      }
      else if ( window.location.hash === '#state_facts' ) {
        window.location.hash='states';

        // add and remove active class for views
          DOMlevel3locationInfoUSlocation.addClass('active');
          DOMlevel4locationInfo.removeClass('active');
          DOMselectedCompanyLogo.addClass('active');
          DOMlogoUnderlay.addClass('active');
      }

      event.stopPropagation();
    });
  // END Back butotn functionality


  return removeLoadingGif();

} //function parseJSON(data)



