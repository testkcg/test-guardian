function setStateNames(stateDefiner) {
  switch(stateDefiner) {
    case "AL":
        fullStateName = "Alabama",
        stateJobLinkNumber = "5540483027",
        factSheetReference = "StateFactSheets_AL.pdf";
        break;

    case "AK":
        fullStateName = "Alaska",
        stateJobLinkNumber = "522740082077",
        factSheetReference = "";
        break;

    case "AZ":
        fullStateName = "Arizona",
        stateJobLinkNumber = "521240082077",
        factSheetReference = "StateFactSheets_AZ.pdf";
        break;

    case "AR":
        fullStateName = "Arkansas",
        stateJobLinkNumber = "520840082077",
        factSheetReference = "StateFactSheets_AR.pdf";
        break;

    case "CA":
        fullStateName = "California",
        stateJobLinkNumber = "521540082077",
        factSheetReference = "StateFactSheets_CA.pdf";
        break;

    case "CO":
        fullStateName = "Colorado",
        stateJobLinkNumber = "524740082077",
        factSheetReference = "";
        break;

    case "CT":
        fullStateName = "Connecticut",
        stateJobLinkNumber = "523340082077",
        factSheetReference = "";
        break;

    case "DE":
        fullStateName = "Delaware",
        stateJobLinkNumber = "524240082077",
        factSheetReference = "StateFactSheets_DE.pdf";
        break;

    case "DC":
        fullStateName = "District of Columbia",
        stateJobLinkNumber = "560740082077",
        factSheetReference = "";
        break;

    case "FL":
        fullStateName = "Florida",
        stateJobLinkNumber = "522440082077",
        factSheetReference = "StateFactSheets_FL.pdf";
        break;

    case "GA":
        fullStateName = "Georgia",
        stateJobLinkNumber = "524440082077",
        factSheetReference = "StateFactSheets_GA.pdf";
        break;

    case "HI":
        fullStateName = "Hawaii",
        stateJobLinkNumber = "",
        factSheetReference = "";
        break;

    case "ID":
        fullStateName = "Idaho",
        stateJobLinkNumber = "524540082077",
        factSheetReference = "";
        break;

    case "IL":
        fullStateName = "Illinois",
        stateJobLinkNumber = "525140082077",
        factSheetReference = "StateFactSheets_IL.pdf";
        break;

    case "IN":
        fullStateName = "Indiana",
        stateJobLinkNumber = "521340082077",
        factSheetReference = "StateFactSheets_IN.pdf";
        break;

    case "IA":
        fullStateName = "Iowa",
        stateJobLinkNumber = "523840082077",
        factSheetReference = "StateFactSheets_IO.pdf";
        break;

    case "KS":
        fullStateName = "Kansas",
        stateJobLinkNumber = "5340483027",
        factSheetReference = "StateFactSheets_KS.pdf";
        break;

    case "KY":
        fullStateName = "Kentucky",
        stateJobLinkNumber = "523440082077",
        factSheetReference = "StateFactSheets_KY.pdf";
        break;

    case "LA":
        fullStateName = "Louisiana",
        stateJobLinkNumber = "521640082077",
        factSheetReference = "StateFactSheets_LA.pdf";
        break;

    case "ME":
        fullStateName = "Maine",
        stateJobLinkNumber = "525240082077",
        factSheetReference = "";
        break;

    case "MD":
        fullStateName = "Maryland",
        stateJobLinkNumber = "520640082077",
        factSheetReference = "";
        break;

    case "MA":
        fullStateName = "Massachusetts",
        stateJobLinkNumber = "523140082077",
        factSheetReference = "StateFactSheets_MA.pdf";
        break;

    case "MI":
        fullStateName = "Michigan",
        stateJobLinkNumber = "523240082077",
        factSheetReference = "StateFactSheets_MI.pdf";
        break;

    case "MN":
        fullStateName = "Minnesota",
        stateJobLinkNumber = "524940082077",
        factSheetReference = "StateFactSheets_MN.pdf";
        break;

    case "MS":
        fullStateName = "Mississippi",
        stateJobLinkNumber = "521940082077",
        factSheetReference = "StateFactSheets_MS.pdf";
        break;

    case "MO":
        fullStateName = "Missouri",
        stateJobLinkNumber = "524340082077",
        factSheetReference = "StateFactSheets_MO.pdf";
        break;

    case "MT":
        fullStateName = "Montana",
        stateJobLinkNumber = "520940082077",
        factSheetReference = "";
        break;

    case "NE":
        fullStateName = "Nebraska",
        stateJobLinkNumber = "521140082077",
        factSheetReference = "StateFactSheets_NE.pdf";
        break;

    case "NV":
        fullStateName = "Nevada",
        stateJobLinkNumber = "524140082077",
        factSheetReference = "StateFactSheets_NV.pdf";
        break;

    case "NH":
        fullStateName = "New Hampshire",
        stateJobLinkNumber = "524640082077",
        factSheetReference = "StateFactSheets_NH.pdf";
        break;

    case "NJ":
        fullStateName = "New Jersey",
        stateJobLinkNumber = "523640082077",
        factSheetReference = "StateFactSheets_NJ.pdf";
        break;

    case "NM":
        fullStateName = "New Mexico",
        stateJobLinkNumber = "521040082077",
        factSheetReference = "";
        break;

    case "NY":
        fullStateName = "New York",
        stateJobLinkNumber = "520540082077",
        factSheetReference = "StateFactSheets_NY.pdf";
        break;

    case "NC":
        fullStateName = "North Carolina",
        stateJobLinkNumber = "522840082077",
        factSheetReference = "StateFactSheets_NC.pdf";
        break;

    case "ND":
        fullStateName = "North Dakota",
        stateJobLinkNumber = "590840082077",
        factSheetReference = "";
        break;

    case "OH": 
        fullStateName = "Ohio",
        stateJobLinkNumber = "524040082077",
        factSheetReference = " StateFactSheets_OH.pdf";
        break;

    case "OK":
        fullStateName = "Oklahoma",
        stateJobLinkNumber = "520340082077",
        factSheetReference = "StateFactSheets_OK.pdf";
        break;

    case "OR":
        fullStateName = "Oregon",
        stateJobLinkNumber = "521840082077",
        factSheetReference = "StateFactSheets_OR.pdf";
        break;

    case "PA":
        fullStateName = "Pennsylvania",
        stateJobLinkNumber = "523540082077",
        factSheetReference = "StateFactSheets_PA.pdf";
        break;

    case "PR":
        fullStateName = "Puerto Rico",
        stateJobLinkNumber = "521240082077",
        factSheetReference = "";
        break;

    case "RI":
        fullStateName = "Rhode Island",
        stateJobLinkNumber = "523740082077",
        factSheetReference = "";
        break;

    case "SC":
        fullStateName = "South Carolina",
        stateJobLinkNumber = "522940082077",
        factSheetReference = "StateFactSheets_SC.pdf";
        break;

    case "SD":
        fullStateName = "South Dakota",
        stateJobLinkNumber = "522040082077",
        factSheetReference = "";
        break;

    case "TN":
        fullStateName = "Tennessee",
        stateJobLinkNumber = "522340082077",
        factSheetReference = "StateFactSheets_TN.pdf";
        break;

    case "TX":
        fullStateName = "Texas",
        stateJobLinkNumber = "520740082077",
        factSheetReference = "StateFactSheets_TX.pdf";
        break;

    case "UT":
        fullStateName = "Utah",
        stateJobLinkNumber = "522540082077",
        factSheetReference = "";
        break;

    case "VT":
        fullStateName = "Vermont",
        stateJobLinkNumber = "524840082077",
        factSheetReference = "";
        break;

    case "VA":
        fullStateName = "Virginia",
        stateJobLinkNumber = "523940082077",
        factSheetReference = "StateFactSheets_VA.pdf";
        break;

    case "WA":
        fullStateName = "Washington",
        stateJobLinkNumber = "520240082077",
        factSheetReference = "StateFactSheets_WA.pdf";
        break;

    case "WV":
        fullStateName = "West Virginia",
        stateJobLinkNumber = "521740082077",
        factSheetReference = "";
        break;

    case "WI":
        fullStateName = "Wisconsin",
        stateJobLinkNumber = "6740483027",
        factSheetReference = "StateFactSheets_WI.pdf";
        break;

    case "WY":
        fullStateName = "Wyoming",
        stateJobLinkNumber = "521440082077",
        factSheetReference = "StateFactSheets_WY.pdf";
        break;

    default:
      fullStateName = '',
      stateJobLinkNumber = '',
      factSheetReference = '';
  }
}





var map;
var iconSize = 1.65;

function initialize() {

  var markers = new Array();

  var locations;

   //CUSTOM MAP STYLES//
      var stylesZoomOut = [
          {
            featureType: "administrative.country",
            elementType: "labels.text",
            stylers: [
              { visibility: "simplified" },
              { color: "#808080"}
            ]
          },
          {
            featureType: "administrative.country",
            elementType: "geometry.stroke",
            stylers: [
              { color: "#a6a6a6"}
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "labels.text",
            stylers: [
              { visibility: "off" },
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "geometry.stroke",
            stylers: [
              { visibility: "off" },
            ]
          },
          {
            featureType: "administrative.locality",
            elementType: "labels.text",
            stylers: [
              { visibility: "off" },
            ]
          },
          {
            featureType: "administrative.neighborhood",
            elementType: "labels",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "landscape.natural.landcover",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "simplified" },
              { color: "#e9e9e9"}
            ]
          },
          {
            featureType: "landscape.natural.terrain",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "water",
            elementType: 'geometry.fill',
            stylers: [
              { visibility: "on" },
              { color: "#b6d4db"}
            ]
          },
          {
            featureType: "water",
            elementType: 'labels.text.fill',
            stylers: [
              { visibility: "simplified" }
            ]
          },
          {
            featureType: "poi",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "road",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          }
      ];

      var stylesZoomInStateLevel = [
          {
            featureType: "administrative.country",
            elementType: "labels.text",
            stylers: [
              { visibility: "simplified" },
              { color: "#808080"}
            ]
          },
          {
            featureType: "administrative.country",
            elementType: "geometry.stroke",
            stylers: [
              { color: "#a6a6a6"}
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "labels.text",
            stylers: [
              { visibility: "on" },
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "geometry.stroke",
            stylers: [
              { visibility: "on" },
              { color: "#a6a6a6"}
            ]
          },
          {
            featureType: "administrative.locality",
            elementType: "labels.text",
            stylers: [
              { visibility: "off" },
            ]
          },
          {
            featureType: "administrative.neighborhood",
            elementType: "labels",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "landscape.natural.landcover",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "simplified" },
              { color: "#e9e9e9"}
            ]
          },
          {
            featureType: "landscape.natural.terrain",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "water",
            elementType: 'geometry.fill',
            stylers: [
              { visibility: "on" },
              { color: "#b6d4db"}
            ]
          },
          {
            featureType: "water",
            elementType: 'labels.text.fill',
            stylers: [
              { visibility: "simplified" }
            ]
          },
          {
            featureType: "poi",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "road",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          }
      ];

      var stylesZoomInCityLevel = [
          {
            featureType: "administrative.country",
            elementType: "labels.text",
            stylers: [
              { visibility: "simplified" },
              { color: "#808080"}
            ]
          },
          {
            featureType: "administrative.country",
            elementType: "geometry.stroke",
            stylers: [
              { color: "#a6a6a6"}
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "labels.text",
            stylers: [
              { visibility: "on" },
            ]
          },
          {
            featureType: "administrative.province",
            elementType: "geometry.stroke",
            stylers: [
              { visibility: "on" },
              { color: "#a6a6a6"}
            ]
          },
          {
            featureType: "administrative.locality",
            elementType: "labels.text",
            stylers: [
              { visibility: "on" },
            ]
          },
          {
            featureType: "administrative.neighborhood",
            elementType: "labels",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "landscape.natural.landcover",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "simplified" },
              { color: "#e9e9e9"}
            ]
          },
          {
            featureType: "landscape.natural.terrain",
            elementType: "geometry.fill",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "water",
            elementType: 'geometry.fill',
            stylers: [
              { visibility: "on" },
              { color: "#b6d4db"}
            ]
          },
          {
            featureType: "water",
            elementType: 'labels.text.fill',
            stylers: [
              { visibility: "simplified" }
            ]
          },
          {
            featureType: "poi",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          },
          {
            featureType: "road",
            elementType: "all",
            stylers: [
              { visibility: "off" }
            ]
          }
      ];
   //END CUSTOM MAP STYLES





   // Map level styling as variables
     var styledMapZoomOut = new google.maps.StyledMapType(stylesZoomOut, {name: "Styled Map Zoom Out"}),
        styledMapZoomInStateLevel = new google.maps.StyledMapType(stylesZoomInStateLevel, {name: "Styled Map Zoom In State Level"}),
        styledMapZoomInCityLevel = new google.maps.StyledMapType(stylesZoomInCityLevel, {name: "Styled Map Zoom In City Level"});





   //CUSTOM MAP FUNCTIONALITY OPTIONS
      var mapOptions = {

         zoom: 4,

         minZoom: 3,

         maxZoom: 6,

         zoomControl: false,

         scrollwheel: false,

         streetViewControl: false,

         disableDoubleClickZoom: false,

         disableDefaultUI: true,

         center: { lat: 45.70, lng: -77.50 },

         mapTypeControlOptions: {
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
         },

         zoomControl: true,

         zoomControlOptions: {
            style: google.maps.ZoomControlStyle.LARGE,
            position: google.maps.ControlPosition.LEFT_CENTER
         }

      };
   //END CUSTOM MAP FUNCTIONALITY OPTIONS   





   // Function to insert commas into large numbers
      function commaSeparateNumber(val) {
          if(val !== null) {
            while ( /(\d+)(\d{3})/.test(val.toString()) ) { 
                val = val.toString().replace(/(\d+)(\d{3})/, '$1'+','+'$2');
            }
            return val;   
          }
        }

    // Function to remove duplicate values from array
      function createUniqueArray(list) {
        var result = [];
        $.each(list, function(i, e) {
            if ($.inArray(e, result) == -1) result.push(e);
        });
        return result;
      }

    // Function to remove loading gif
      function removeLoadingGif() {
        $('#load').remove();
      }





   // INITIALIZE MAP
     map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
     var infowindow = new google.maps.InfoWindow({});

    // Arrays for specific information heirarchy based on slide out menu
      var countryLevelInfoArray = new Array();

    // Arrays for plot points
      var mapPlotArray = new Array();

    // set DOM variables to append related info to window
      var DOMlocationInfoWindow = $('.location_info_window'),
          DOMlocationLevel1JobCountContainer = $('.level_1_location_job_count_container'),
          DOMlocationLevel1Title = $('.level_1_location_title'),
          DOMlocationLevel1JobCount = $('.level_1_location_job_count'),
          DOMlocationLevel1CompanyPresenceContainer = $('.level_1_company_presence_container'),
          DOMlocationLevel1CompanyPresenceList = $('.level_1_location_company_presence_list'),
          DOMlocationLevel2FactSheetContainer = $('.level_2_location_fact_sheet_container'),
          DOMlocationLevel2FactSheetTitle = $('.level_2_location_fact_sheet_title'),
          DOMlocationLevel2DownloadButton = $('.level_2_location_fact_sheet_container .download_button'),
          DOMlocationLevel2CompanyPresenceContainer = $('.level_2_location_company_presence_container'),
          DOMlocationLevel2CompanyPresenceList = $('.level_2_location_company_presence_list'),
          DOMlocationLevel2JobCountContainer = $('.level_2_location_job_count_container'),
          DOMlocationLevel2JobCount = $('.level_2_location_job_count'),
          DOMlocationLevel2JobCountTitle = $('.level_2_location_job_count_title'),
          DOMlocationLevel2WagesContainer = $('.level_2_location_wages_container'),
          DOMlocationLevel2WagesTitle = $('.level_2_location_wages_title'),
          DOMlocationLevel2Wages = $('.level_2_location_wages');

    // Global USA location Definer
      var USAlocationDefiner;

    //AJAX call for map data
      var JSONmapData;

      $.ajax({
          url : '/assets/js/location_data.json',
          type: 'GET',
          success : parseJSON
      });

      function parseJSON (data){

        // iterate coutries
        var countries=data.Countries;
        
        for (var C = 0; C < countries.length; C++){

          // Create new state level info array for each country
            stateLevelInfoArray = new Array();

          // Create country variables from JSON
            var countryName = countries[C].Name,
                countryHeadCount = commaSeparateNumber( countries[C].HeadCount ),
                countryStates = data.Countries[C].States;

          // Define whether or not location is US based
            if (countryName === 'United States') {
              USAlocationDefiner = true;
            }
            else {
              USAlocationDefiner = false;
            }
          // END Define whether or not location is US based

          // Collect all country related Information
            var miniCountryLevelInfoArray = new Array();
                miniCountryLevelInfoArray[C]=[{'countryName':countryName,'countryHeadCount':countryHeadCount, 'stateLevelInfo':stateLevelInfoArray }];
                countryLevelInfoArray.sort().push(miniCountryLevelInfoArray[C]);

          //iterate states;
            var states = data.Countries[C].States;

            if ( states.length !== 0 ) {

              for (var S = 0; S < states.length; S++) {

                cityNameArray = new Array();

                // state variables from JSON information
                  var stateAbb = states[S].Name,
                      stateHeadCount = commaSeparateNumber( states[S].HeadCount ),
                      stateCompensation = '$'+commaSeparateNumber( states[S].Compensation );
                    
                  // Set state title based on state abbreviation
                    setStateNames(stateAbb);
                  // END Set state title based on state abbreviation

                  // Create an array of State information
                    var miniStateLevelInfoArray = new Array();
                        miniStateLevelInfoArray[S]=[{'stateAbb':stateAbb, 'fullStateName':fullStateName, 'cityNames': cityNameArray,'stateHeadCount':stateHeadCount,'stateCompensation':stateCompensation, 'stateFactSheetReference': factSheetReference}];
                        stateLevelInfoArray.sort().push(miniStateLevelInfoArray[S]);
                  // END Create an array of State information
           
                  //iterate cities;
                    var cities = data.Countries[C].States[S].Cities;

                    if ( cities.length !== 0 ) {

                      for (var SS = 0; SS < cities.length; SS++) {

                        companyNameArray = new Array();

                        var cityName = cities[SS].Name,
                            companyName = cities[SS].companies,
                            companies = data.Countries[C].States[S].Cities[SS].Companies;

                            // Create array of city names to inject in stateLevelInfoArray
                              var miniCityNameArray = new Array();
                                  miniCityNameArray[S] = [{'cityName':cityName, 'companyNames':companyNameArray}];
                                  cityNameArray.sort().push(miniCityNameArray[S]);

                            //iterate company locations
                              for (var CO = 0; CO < companies.length; CO++) {

                              // Set company variables based on JSON
                                var companyID = companies[CO].Name.toLowerCase().replace(/[^A-Z0-9]/ig, ""), //turns all company ID's to lowercase and removes spaces
                                    companyLng = companies[CO].Longitude,
                                    companyLat = companies[CO].Latitude;           

                            // Set company title based on company ID
                              switch(companyID) {
                                case "flinthillsresources":
                                  companyName = 'Flint Hills Resources',
                                  companyColor = '#0d4d6e';
                                  break;
                                case "georgiapacific":
                                  companyName = 'Georgia-Pacific',
                                  companyColor = '#ED804F';
                                  break;
                                case "invista":
                                  companyName = 'INVISTA',
                                  companyColor = '#EB4350';
                                  break;
                                case "kochagenergysolutions":
                                  companyName = 'Koch Ag & Energy Solutions',
                                  companyColor = '#7EC274';
                                  break;
                                case "kbs":
                                  companyName = 'Koch Business Solutions',
                                  companyColor = '#00e4ff';
                                  break;
                                case "kochchemicaltechnologygroup":
                                  companyName = 'Koch Chemical Technology Group',
                                  companyColor = '#8A8EC2';
                                  break;
                                case "kochindustriesincandother":
                                  companyName = 'Koch Industries',
                                  companyColor = '#00a8e1';
                                  break;
                                case "kochminerals":
                                  companyName = 'Koch Minerals',
                                  companyColor = '#FEE56C';
                                  break;
                                case "kochpipelinecompany":
                                  companyName = 'Koch Pipeline Company',
                                  companyColor = '#2394A3';
                                  break;
                                case "kochsupplytrading":
                                  companyName = 'Koch Supply & Trading',
                                  companyColor = '#9B9B9B';
                                  break;
                                case "matadorcattlecompany":
                                  companyName = 'Matador Cattle Company',
                                  companyColor = '#783342';
                                  break;
                                case "molex":
                                  companyName = 'Molex',
                                  companyColor = '#945EA6';
                                  break;
                                default:
                                companyName = '';
                              }
                            // END Set company title based on company ID

                            // Create array of company names to inject in citiesArray
                              var miniCompanyNameArray = new Array();
                                  miniCompanyNameArray[CO] = [{'companyName': companyName}];
                                  companyNameArray.sort().push(miniCompanyNameArray[CO]); 
                            //MAP MARKER CATEGORY FUNCTIONALITY

                            // Plot point on Google Map if Lat and Lng do not equal null
                              var marker;

                              $('.map_tooltip').parent().addClass(".custom_map_tooltip");

                              //If lat and lng are defined assign properties to marker
                                if ( companyLat != null && companyLng != null ) {

                                  //Google map plotting
                                    mapPlotArray.push([companyLat, companyLng]);
                                      marker = new google.maps.Marker({
                                        position: new google.maps.LatLng(companyLat, companyLng),
                                        lat: companyLat,
                                        lng: companyLng,
                                        map: map,
                                        companyID: companyID,
                                        company: companyName,
                                        country: countryName,
                                        stateAbb: stateAbb,
                                        stateName: fullStateName,
                                        city: cityName,
                                        icon: {
                                          path: 'M3.6,0C1.6,0,0,1.6,0,3.6C0,4,0.1,4.5,0.2,4.8c0,0.1,3.4,7.2,3.4,7.2l3.3-7c0.2-0.4,0.3-0.9,0.3-1.4, C7.2,1.6,5.6,0,3.6,0z M3.6,6.1C2.2,6.1,1.1,5,1.1,3.6c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C6.1,5,5,6.1,3.6,6.1z',
                                          fillOpacity: .7,
                                          fillColor: companyColor,
                                          scale: 1.75,
                                          strokeWeight: 0,
                                          anchor: new google.maps.Point(4,10)
                                        }
                                      }); //new google.maps.Marker
                                    markers.push(marker); 
                                // END plot point on Google Map

                                  if (USAlocationDefiner) {
                                    // Marker click event
                                      google.maps.event.addListener(marker, 'click', function() {
                                        
                                        map.panTo(new google.maps.LatLng(this.lat, this.lng));
                                        
                                        displayLocationInfo(this.country, this.stateName);      
                                               
                                      });
                                    // End Marker click event
                                  }
                                  else {
                                    // Marker click event
                                      google.maps.event.addListener(marker, 'click', function() {
                                       
                                        map.panTo(new google.maps.LatLng(this.lat, this.lng));

                                        displayLocationInfo(this.country);                                  
                                      });
                                    // End Marker click event
                                  }
                              }
                              //END If lat and lng are defined assign properties to marker

                          } //END iterate company locations
                        } //END iterate cities
                      } // if cities exist
                      else {}
                } // END iterate states
              } // if states exist
              else {}
          } //END interate countries         

          return displayCompanyLocations();
        }; //showJson


        //DOM element variables
          var slideToggleButton = $('.slide_toggle_button'),
              companiesCheckList = $('.companies_checklist'),
              locationInfoCloseButton = $('.location_info_window .close_button'),
              locationInfoWindow = $('.location_info_window'),
              companyCheckbox = $('.company_checkbox'),
              inactiveMapCover = $('.inactive_map_cover');

        // FUNCTION FOR USA LOCATION PIN CLICK
          function displayLocationInfo(selectedCountry, selectedState) {

            locationInfoWindow.fadeIn(300).toggleClass('active');
          
          // toggle close state of windows
            slideToggleButton
              .add(companiesCheckList)
              .add(inactiveMapCover)
              .toggleClass('active');

          // loop through countries
            for( i=0; i < countryLevelInfoArray.length; i++) {

            // if the selected country matches a country in JSON
              if( selectedCountry === countryLevelInfoArray[i][0].countryName) {
                DOMlocationLevel1Title.append(countryLevelInfoArray[i][0].countryName);
                
                // if country head count exists
                  if ( countryLevelInfoArray[i][0].countryHeadCount !== '0' && countryLevelInfoArray[i][0].countryHeadCount !== null) {
                    DOMlocationLevel1Title.append(" Jobs");
                    DOMlocationLevel1JobCount.append( countryLevelInfoArray[i][0].countryHeadCount ); 
                  }

                // if states exist
                  if ( selectedState != undefined ) {

                    // Display state info container
                      DOMlocationLevel2FactSheetContainer
                        .add(DOMlocationLevel2CompanyPresenceContainer)
                        .addClass('active');

                    // Loop through States
                      for( a=0; a < countryLevelInfoArray[i][0].stateLevelInfo.length; a++ ) {

                        // if selected state matches a state in JSON
                          if( selectedState === countryLevelInfoArray[i][0].stateLevelInfo[a][0].fullStateName ) {
                            DOMlocationLevel2FactSheetTitle.append("Koch in "+selectedState);


                            // if the state has a fact sheet associated with it
                              if ( countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateFactSheetReference != '') {
                                DOMlocationLevel2DownloadButton.css('display', 'block').attr('href', '../files/statefactsheets/'+countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateFactSheetReference);
                                DOMlocationLevel2DownloadButton.css('display', 'block').attr('onclick', 'ga("send", "event", "'+selectedState+'_stateFactSheet", "click", "download")');
                              }

                            // if the state head count does not equal 0
                              if ( countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateHeadCount !== 0 ) {
                                DOMlocationLevel2JobCountContainer.addClass('active');
                                DOMlocationLevel2JobCountTitle.append(selectedState+" Jobs");
                                DOMlocationLevel2JobCount.append(countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateHeadCount);
                              }

                            // if the state compensation does not equal 0
                              if ( countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateCompensation !== '$0' ) {
                                DOMlocationLevel2WagesContainer.addClass('active');
                                DOMlocationLevel2WagesTitle.append(selectedState+" Wages & Benefits");
                                DOMlocationLevel2Wages.append(countryLevelInfoArray[i][0].stateLevelInfo[a][0].stateCompensation);
                              }
                            

                            // Create Array for companies in selected State
                              var stateCompaniesArray = new Array();

                            // Loop through cities and companies
                              for( b=0; b < countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames.length; b++ ) {
                                for( c=0; c <countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames[b][0].companyNames.length; c++ ) {
                                  stateCompaniesArray.sort().push(countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames[b][0].companyNames[c][0].companyName);
                                }
                              }

                            // Create an array the eliminated duplicates  from companies array and append to DOM
                              uniqueStateCompaniesArray = createUniqueArray(stateCompaniesArray);
                              for ( d=0; d < uniqueStateCompaniesArray.length; d++ ) {
                                DOMlocationLevel2CompanyPresenceList.append('<li>'+uniqueStateCompaniesArray[d]+',  </li>');
                              }
                          } // END if selected state matches a state in JSON
                      } // END Loop through states
                    } // END if states exist

                  // If states don't exist display country company info
                    else {

                      DOMlocationLevel1CompanyPresenceContainer.addClass('active');

                      // Create Array for companies in selected State
                        var countryCompaniesArray = new Array();

                        for( a=0; a < countryLevelInfoArray[i][0].stateLevelInfo.length; a++ ) {
                          for( b=0; b < countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames.length; b++ ) {
                            for( c=0; c <countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames[b][0].companyNames.length; c++ ) {
                              countryCompaniesArray.sort().push(countryLevelInfoArray[i][0].stateLevelInfo[a][0].cityNames[b][0].companyNames[c][0].companyName);
                            }
                          }
                        }

                      // Create an array the eliminated duplicates  from companies array and append to DOM
                        uniqueCountryCompaniesArray = createUniqueArray(countryCompaniesArray);
                        for ( d=0; d < uniqueCountryCompaniesArray.length; d++ ) {
                          DOMlocationLevel1CompanyPresenceList.append('<li>'+uniqueCountryCompaniesArray[d]+', </li>');
                        }
                    } //END if states don't exist
              } // END if the selected country matches a country in JSON
            } //END loop through countries             
          } // END FUNCTION FOR USA LOCATION PIN CLICK



        

          // Close location info window
            function closeLocationInfoWindow() {
              $(document).on('click', '.location_info_window .close_button, .inactive_map_cover', function(event) {
                
                  locationInfoWindow.css('display', 'none').toggleClass('active');

                  // toggle close state of windows
                    slideToggleButton
                      .add(companiesCheckList)
                      .toggleClass('active');

                    DOMlocationLevel1CompanyPresenceContainer
                      .add(DOMlocationLevel2FactSheetContainer)
                      .add(DOMlocationLevel2CompanyPresenceContainer)
                      .add(DOMlocationLevel2JobCountContainer)
                      .add(DOMlocationLevel2WagesContainer)
                      .add(inactiveMapCover)
                      .removeClass('active');

                  // empty DOM in info window
                    DOMlocationLevel1Title
                      .add(DOMlocationLevel1JobCount)
                      .add(DOMlocationLevel1CompanyPresenceList)
                      .add(DOMlocationLevel2FactSheetTitle)
                      .add(DOMlocationLevel2CompanyPresenceList)
                      .add(DOMlocationLevel2JobCountTitle)
                      .add(DOMlocationLevel2JobCount)
                      .add(DOMlocationLevel2WagesTitle)
                      .add(DOMlocationLevel2Wages)
                      .empty();

                    DOMlocationLevel2DownloadButton.toggle().attr('href', '');

                  event.stopPropagation();
              });
            }
            closeLocationInfoWindow(); 


        
        

        // Function for showing / hiding markers
          function displayCompanyLocations() {

            // show map marker function
              function show(category) {
                for( i=0; i < markers.length; i++) {
                  if (markers[i].companyID == category) {
                    markers[i].setVisible(true);
                  }
                }
              }
            // End show marker function

            // hide map marker function
              function hide(category) {
                for( i=0; i < markers.length; i++) {
                  if (markers[i].companyID == category) {
                    markers[i].setVisible(false);
                  }
                }
              }

            // Initial Hide of company pins
              // hide("flinthillsresources");
                hide("georgiapacific");
                hide("invista");
                hide("kochagenergysolutions");
                hide("kbs");
                hide("kochchemicaltechnologygroup");
                hide("kochindustriesincandother");
                hide("kochminerals");
                hide("kochpipelinecompany");
                hide("kochsupplytrading");
                hide("matadorcattlecompany");
                hide("molex");
              // End hide marker function

            companyCheckbox.click(function(event) {

              $(this).toggleClass('inactive');

              var selectedCompany = $(this).attr('data-company-id');

              for( i=0; i < markers.length; i++) {
                if ( (!$(this).hasClass('inactive')) ) {
                  if( selectedCompany === markers[i].companyID) {
                    show(selectedCompany);
                  }
                }
                else {
                  hide(selectedCompany);
                }
              } // for( i=0; i < markers.length; i++)

              // Select All and Clear All functionality
                if ( $(this).hasClass('viewall') && (!$(this).hasClass('inactive'))  ) {
                  
                  $(this).toggleClass('inactive');

                  companyCheckbox.removeClass('inactive');
                  show("flinthillsresources");
                  show("georgiapacific");
                  show("invista");
                  show("kochagenergysolutions");
                  show("kbs");
                  show("kochchemicaltechnologygroup");
                  show("kochindustriesincandother");
                  show("kochminerals");
                  show("kochpipelinecompany");
                  show("kochsupplytrading");
                  show("matadorcattlecompany");
                  show("molex");
                }
                else if ( $(this).hasClass('viewall') && $(this).hasClass('inactive') || $(this).hasClass('clearall') ) {
                  
                  companyCheckbox.addClass('inactive');
                  
                  hide("flinthillsresources");
                  hide("georgiapacific");
                  hide("invista");
                  hide("kochagenergysolutions");
                  hide("kbs");
                  hide("kochchemicaltechnologygroup");
                  hide("kochindustriesincandother");
                  hide("kochminerals");
                  hide("kochpipelinecompany");
                  hide("kochsupplytrading");
                  hide("matadorcattlecompany");
                  hide("molex");
                }
              // END Select All and Clear All functionality

              // If any of the checkboxes are inactive then viewall is inactive
                if ( $('.company_checkbox').hasClass('inactive') ) {
                  $('.viewall').addClass('inactive');
                }

              event.stopPropagation();
            }); //companyCheckbox.click
            
            return removeLoadingGif();
          }; //displayCompanyLocations
        // END Function for showing / hiding markers


      


        //Toggle the list of companies
          function companiesListToggle() {
            slideToggleButton.click(function(event) {
              slideToggleButton
                .add(companiesCheckList)
                .toggleClass('active');

              event.stopPropagation();
            });
          } //companiesListToggle
          companiesListToggle();
        //END Toggle the list of companies
      




        var script = document.createElement('script');

        map.mapTypes.set('map_style', styledMapZoomOut);
        map.setMapTypeId('map_style');





        google.maps.event.addListener(map, 'zoom_changed', function() {
          var zoomLevel = map.getZoom();

          if( zoomLevel >= 6 ) {
            map.mapTypes.set('map_style', styledMapZoomInCityLevel);
            map.setMapTypeId('map_style');    
          }
          else if ( zoomLevel === 5 ) {
            map.mapTypes.set('map_style', styledMapZoomInStateLevel);
            map.setMapTypeId('map_style');
          }
          else if ( zoomLevel <= 4 ) {
            map.mapTypes.set('map_style', styledMapZoomOut);
            map.setMapTypeId('map_style');
          }
        });
} // END Initializtion

google.maps.event.addDomListener(window, 'load', initialize() );







